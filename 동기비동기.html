<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>동기 비동기</title>
</head>
<body>
    <script>
        let a = "순서1";
        let b = "순서2";
        let c = "순서3";
        console.log(a);
        console.log(b);
        console.log(c);
        // javascript는 기본적으로 동기식으로 동작함(순서대로)
        console.log("비동기");
        console.log(a);
        setTimeout(()=>{console.log(b)}, 1000);
        console.log(c);


        let test2 = async ()=>{
            // await는 비동기함수를 동기식으로 기다림
            // await는 async 함수만 사용 가능(함수명 앞에 async 있어야 함.)
            let res = await fetch("https://api.upbit.com/v1/market/all");
            console.log('test2 res:', res)
            let result = res.json();
            console.log('test2 result:', result);
            result.then(function(data){
                console.log('test2 data', data);
            })
        }
        test2();

        let test = ()=>{
            // fetch는 javascript에서 네트워크 요청을 보내고, 그 결과를 처리하는데 사용되는 API
            // fetch는 Promise를 반환하여 비동기 작업처리에 유용함.
            let res = fetch("https://api.upbit.com/v1/market/all");
            console.log(res);
            // promise는 3가지 상태를 가짐
            // 1. 대기(Pending): 초기 상태, 비동기 작업이 아직 완료되지 않은 상태.
            // 2. 이행(Fulilled): 성공적으로 완료된 상태 then 메서드로 결과를 받을 수 있음.
            // 3. 거부(Rejected): 비동기 작업 실패한 상태 catch로 오류를 처리할 수 있음.
            let reslut = res.json();
            console.log(reslut); // 오류남
        }
        test();
    </script>
</body>
</html>